<script>

    var itemshenmi = new Array(
        1053063,//  神秘之影战士套装
1073158,//  神秘之影战士鞋
1082695,//  神秘之影战士手套
1102940,//  神秘之影战士披风
1152196,//  神秘之影战士护肩

1004809,//  神秘之影法师帽
1053064,//  神秘之影法师套装
1073159,//  神秘之影法师鞋
1082696,//  神秘之影法师手套
1102941,//  神秘之影法师披风
1152197,//  神秘之影法师护肩

1004810,//  神秘之影弓箭手帽
1053065,//  神秘之影弓箭手套装
1073160,//  神秘之影弓箭手鞋
1082697,//  神秘之影弓箭手手套
1102942,//  神秘之影弓箭手披风
1152198,//  神秘之影弓箭手护肩

1004811,//  神秘之影飞侠帽
1053066,//  神秘之影飞侠套装
1073161,//  神秘之影飞侠鞋
1082698,//  神秘之影飞侠手套
1102943,//  神秘之影飞侠披风
1152199,//  神秘之影飞侠护肩

1004812,//  神秘之影海盗帽
1053067,//  神秘之影海盗套装
1073162,// 神秘之影海盗鞋
1082699,//  神秘之影海盗手套
1102944,//  神秘之影海盗披风
1152200,//  神秘之影海盗护肩

/*力量=70;敏捷=70;智力=70;运气=70;攻击力=50;魔法力=50;BOSS伤害=10;总伤害=9;所有属性=9
神秘防具*/

1232113,//  神秘之影亡命剑
1302343,//  神秘之影单手剑
1312203,//  神秘之影斧
1322255,//  神秘之影锤
1402259,//  神秘之影双手剑
1412181,//  神秘之影双手战斧
1422189,//  神秘之影双手锤
1432218,//  神秘之影长枪
1442274,//  神秘之影矛
1582023,//  神秘之影机甲枪
1542117,//  神秘之影武士刀

1212120,//  神秘之影双头杖
1372228,//  神秘之影短杖
1382265,//  神秘之影长杖
1262039,//  神秘之影ESP限制器
1552119,//  神秘之影折扇
1252098,//  神秘之影魔法槌
1282017,//  神秘之影魔力手套

1452257,//  神秘之影弓
1462243,//  神秘之影弩
1522143,//  神秘之影双弩枪

1332279,//  神秘之影匕首
1362140,//  神秘之影手杖
1472265,//  神秘之影拳套
1242122,//  神秘之影能量剑
1292018,//  神秘之影草扇

1222113,//  神秘之影灵魂手铳
1242121,//  神秘之影能量剑
1482221,//  神秘之影指节
1492235,//  神秘之影短枪
1532150,//  神秘之影攻城炮
1592020,// 神秘之影远古弓
1272017,//  神秘之影锁链
1213018//  神秘之影调谐器

/*力量=90;敏捷=90;智力=90;运气=90;攻击力=70;魔法力=70;BOSS伤害=15;总伤害=9;所有属性=9
神秘武器

""

	1302343,1312203,1322255,1402259,1412181,1422189,1432218,1442274,
	1582023,1542117,1232113,1452257,1462243,1522143,1472265,1332279,
	1362140,1342104,1252098,1262039,1372228,1382265,1552119,1212120,
	1222113,1242121,1482221,1492235,1272017,1282017,1532150,1592020,
	1213018,1292018)*/

            );





    var status;
    var status = -1;
    var shenmi = null;
    var shenmiId = 0;
    var slevel = 0;
start()
function start() {//第一句初始化状态
    status = -1;//调用action方法(action方法在下面有定义)
    action(1, 0, 0);//1，0，0  为三个参数，会创给action方法
}


function action(mode, type, selection) {/*具体脚本要做的功能mode,type,selection为变量值为上面传下来的1,0,0   */
    if (mode == 1) {
        //cm为源码那边传过来的对象，只用记住，调用端的功能，都是靠cm来做
        cm.dispose();//cm的dispose为关闭对话，也就是关闭和npc的对话框
    }else{
        if(status>= 0 && mode ==0){//如果mode不是-1，执行下面的代码
        //变量status从上面得知为0，mode为1，&&为逻辑且，比如A为真B为真，A&B才是真，否则为false，所以if(false)
        //这段代码 点结束对话会执行，点了结束对话mode会变成0
        
        cm.sendOk("欢迎下次再来");//说完这句话就调用关闭对话的函数

        cm.dispose();//跳出action方法，  执行return就代表脚本执行结束
        return;
    }if(mode==1){//如果mode变量为1，得知确实为1

        status++;//status++就是status的值+1得知会变成2
    }else{
        status--;//如果mode不为1  那么status--就是status-1 为0
    
    
    }if(status == 0){//下面的代码就是根据status的值来做功能............这里开始
        var txt = "";
        
        txt += "这里是神秘兑换神秘盒子中心\r\n";
		txt += "每次回收需要#v神秘武器或防具1件\r\n";
		txt += fangge1+"请将#r要会搜的神秘装备#k放置在#r第一格#k哟。\r\n";
        txt += "#L1# #b开始回收装备#k#l\r\n";
        
        cm.sendSimple(txt);
    }else if(status == 1){
        if (selection == 1) {
			if (cm.getInventory(1).getItem(1) == null){
				cm.sendOk("装备栏第一格得放上装备哦。")
				cm.dispose();
				return;
            }else{
				shenmi = cm.getInventory(1).getItem(1);//获取装备
                shenmiId = oldEquip.getItemId();//获取装备ID；
				if(!AssistantCheck()){
					cm.sendOk("当前装备不支持回收")
					cm.dispose();
                    return;
				}}}
		
        //var context="#r#L1#你好#l";//#r代表红色字体 #r#L1#你好#l  代表选项

        //cm.sendSimple(context);//NPC会和你对话，并且带选项  sendSimple为带选项的对话框
    }else if(status == 1){
        cm.haveItem(itemshenmi,1);
        cm.sendOk("#e没有神秘装备，提升面包再去爆爆爆爆爆")//如果玩家点了下一步 执行下面语句
        cm.dispose();
    }else{cm.gainItem(itemshenmi,-1);
        cm.gainItem(5680181,3);//10周年我与友箱子

    }function zhuangbeikeming(){
	for(var i =0;i<items.shenmi;i++){
		if(items[i] == shenmiId){
			return true;
		}
	}
	return false;
}
    }
    }



</script>

